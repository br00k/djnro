{% extends "edumanage/welcome.html"%}
{% load i18n %}
{% load staticfiles %}

{% block extrahead %}
<link href="https://cdn.datatables.net/plug-ins/1.10.7/integration/bootstrap/3/dataTables.bootstrap.css" rel="stylesheet">
{% endblock %}

{% block homeactive %}{% endblock %}
{% block serversactive %}class="active"{% endblock %}
{% block management_content %}
	
	<div id="js-trans" data-json=
		'{
			"display":	"{% trans 'Display' %}",
			"all":		"{% trans 'All' %}",
			"nrecs":		"{% trans 'No records to display' %}",
			"entries":	"{% trans 'Showing 0 to 0 of 0 entries' %}",
			"search":		"{% trans 'Search:' %}",
			"first":		"{% trans 'First' %}",
			"prev":		"{% trans 'Previous' %}",
			"next":		"{% trans 'Next' %}",
			"last":		"{% trans 'Last' %}",
			"servers":	"{% trans 'servers' %}",
			"delservwarn":	"{% trans 'You are about to delete server' %}",
			"presdel":	"{% trans 'Press Delete to proceed or Cancel to cancel deletion' %}",
			"delserv":		"{% trans 'Delete server' %}",
			"server":	"{% trans 'server' %}",
			"succdel":	"{% trans 'successfully deleted' %}",
			"showing":	"{% trans 'Showing _START_ to _END_ of _TOTAL_ entries' %}"
		}'>
	</div>

	<div id="js-delurl" data-delurl="{% url del-server %}"></div>

	<h4>{% trans "Servers" %}</h4>
	<hr>
	{% if messages %}
	<table class="table table-condensed">
	    {% for message in messages %}
	    <tr {% if message.tags %} class="{{ message.tags }}"{% endif %}><td>{{ message }}<td></tr>
	    {% endfor %}
	</table>
	{% endif %}

	<div id="js-servers" data-servers="{% if servers %}true{% else %}false{% endif %}"></div>

	{% if servers %}
	<table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" width="100%" id="table">
	<thead>
	<tr>
		<th>{% trans "Name" %}</th>
		<th>{% trans "Type" %}</th>
		<th>{% trans "Authentication Port" %}</th>
		<th>{% trans "Protocol" %}</th>
		<th style="text-align: center;">{% trans "Action" %}</th>
	</tr>
	</thead>

	<tbody>
	{% for server in servers %}
		<tr class="GradeC">
		<td><a href = "{% url servers server.pk %}">{{server.get_name}}</a></td>
		<td>{{server.get_ertype_display}}</td>
		<td>{{server.auth_port}}</td>
		<td>{{server.proto}}</td>
		<td style="text-align: center;"><a href="{% url edit-servers server.pk %}" class="btn btn-small">{% trans "edit" %}</a> <a href="#" id="del_server_{{server.pk}}" data-servername="{{server.get_name}}" class="btn btn-small btn-warning">{% trans "delete" %}</a></td>
	</tr>
		{% endfor %}
		</tbody>
	</table>
{% endif %}
	<div><a href="{% url edit-servers %}" class="btn btn-primary">{% trans "Add new server" %}</a></div>
<div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
    	<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
				<h3 id="myModalLabel">{% trans "Delete Server" %}</h3>
			</div>
			<div class="modal-body" id="mymodalbody">
			</div>
			<div class="modal-footer">
				<button class="btn" data-dismiss="modal" aria-hidden="true">{% trans "Cancel" %}</button>
				<a class="btn btn-warning" id="delserverSubmit" href="#">{% trans "Delete" %}</a>
			</div>
		</div>
	</div>
</div>
{% endblock %}



{% block extrajs %}
<script type="text/javascript" src="//cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="//cdn.datatables.net/plug-ins/505bef35b56/integration/bootstrap/1/dataTables.bootstrap.js"></script>
<script type="text/javascript" src= "{% static 'edumanage/js/servers.js' %}">

</script>
{% endblock %}
