{% extends "edumanage/welcome.html"%}
{% load staticfiles %}
{% load i18n %}

{% block homeactive %}{% endblock %}
{% block realmsactive %}class="active"{% endblock %}

{% block management_content %}

	<div id="js-trans" data-json=
		'{
			"display":	"{% trans 'Display' %}",
			"nrecs":		"{% trans 'No records to display' %}",
			"entries":	"{% trans 'Showing 0 to 0 of 0 entries' %}",
			"search":		"{% trans 'Search:' %}",
			"first":		"{% trans 'First' %}",
			"prev":		"{% trans 'Previous' %}",
			"next":		"{% trans 'Next' %}",
			"last":		"{% trans 'Last' %}",
			"dellocwarn":	"{% trans 'You are about to delete realm' %}",
			"presdel":	"{% trans 'Press Delete to proceed or Cancel to cancel deletion' %}",
			"realm":	"{% trans 'Realm' %}",
			"succdel":	"{% trans 'successfully deleted' %}",
			"all":	"{% trans 'All' %}",
			"showing":	"{% trans 'Showing _START_ to _END_ of _TOTAL_ entries' %}",
			"realms":	"{% trans 'Realms' %}",
			"delrealm": "{% trans 'Delete realm ' %}"
		}'>
	</div>
	<div id="js-delurl" data-delurl="{% url del-realm %}"></div>

<h4>{% trans "Realms" %}</h4>
<hr>
{% if messages %}
<table class="table table-condensed">

    {% for message in messages %}
    <tr {% if message.tags %} class="{{ message.tags }}"{% endif %}><td>{{ message }}<td></tr>
    {% endfor %}
</table>
{% endif %}
{% if institution.ertype == 1 or institution.ertype == 3 %}
	<div id="js-realms" data-realms="{% if realms %}true{% else %}false{% endif %}"></div>
  {% if realms %}
  <table cellpadding="0" cellspacing="0" border="0" class="table table-striped table-bordered" width="100%" id="table">
	<thead>
	<tr>
		<th>{% trans "Realm" %}</th>
		<th>{% trans "Server(s)" %}</th>
		<th style="text-align: center;">{% trans "Action" %}</th>
	</tr>
	</thead>
	<tbody>
    {% for realm in realms %}
  	<tr class="GradeC">
    	<td>{{realm.realm}}</td>
    	<td>{{realm.get_servers}}</td>
    	<td style="text-align: center;"><a href="{% url edit-realms realm.pk %}" class="btn btn-small">{% trans "edit" %}</a> <a href="#" id="del_realm_{{realm.pk}}" data-realmname="{{realm.realm}}" class="btn btn-small btn-warning">{% trans "delete" %}</a></td>
    </tr>
  	{% endfor %}
  	</tbody>
  </table>

{% endif %}
<div>{% if institution.ertype == 1 or institution.ertype == 3 %}<a href="{% url edit-realms %}" class="btn btn-primary">{% trans "Add new realm" %}</a>{% endif %}</div>
{% endif %}
<div class="modal" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
	<div class="modal-dialog">
    	<div class="modal-content">
			<div class="modal-header">
				<button type="button" class="close" data-dismiss="modal" aria-hidden="true">Ã—</button>
				<h3 id="myModalLabel">{% trans "Delete Realm" %}</h3>
			</div>
			<div class="modal-body" id="mymodalbody">
			</div>
			<div class="modal-footer">
				<button class="btn" data-dismiss="modal" aria-hidden="true">{% trans "Cancel" %}</button>
				<a class="btn btn-warning" id="delrealmSubmit" href="#">{% trans "Delete" %}</a>
			</div>
		</div>
	</div>
</div>
{% endblock %}



{% block extrajs %}
<script type="text/javascript" src="//cdn.datatables.net/1.10.7/js/jquery.dataTables.min.js"></script>
<script type="text/javascript" src="//cdn.datatables.net/plug-ins/505bef35b56/integration/bootstrap/1/dataTables.bootstrap.js"></script>
<script type="text/javascript" src="{% static 'edumanage/js/realms.js' %}"></script>
{% endblock %}
